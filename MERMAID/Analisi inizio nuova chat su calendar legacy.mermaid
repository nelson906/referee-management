graph TB
    %% USER TYPES
    subgraph "ğŸ‘¥ User Types"
        Admin[Zone Admin<br/>user_type: admin]
        National[National Admin<br/>user_type: national_admin]
        Referee[Referee<br/>user_type: referee]
        Public[Public User<br/>authenticated]
    end

    %% MENU NAVIGATION
    subgraph "ğŸ¯ Navigation Entry Points"
        MenuCalendar["ğŸ“… Menu: Calendario<br/>layouts.admin"]
        TournamentsList["ğŸ“‹ Tornei Index<br/>admin.tournaments.index"]
        TournamentCalendarBtn["ğŸ—“ï¸ Button: Calendario<br/>(in tournaments list)"]
        RefereeMenu["ğŸ‘¨â€âš–ï¸ Referee Menu<br/>layouts.referee"]
        PublicMenu["ğŸŒ Public Menu<br/>layouts.app"]
    end

    %% ROUTES LAYER
    subgraph "ğŸ›£ï¸ Routes Layer"
        Route1["admin.calendar.index<br/>GET /admin/calendar"]
        Route2["admin.tournaments.calendar<br/>GET /admin/tournaments/calendar"]
        Route3["referee.availability.calendar<br/>GET /referee/availability/calendar"]
        Route4["tournaments.calendar<br/>GET /tournaments/calendar"]
    end

    %% CONTROLLERS LAYER
    subgraph "ğŸ® Controllers Layer"
        CalendarController["ğŸ“… Admin\\CalendarController<br/>method: index()"]
        TournamentController["ğŸ† Admin\\TournamentController<br/>methods: calendar(), adminCalendar()"]
        AvailabilityController["âš¡ Referee\\AvailabilityController<br/>method: calendar()"]
        PublicTournamentController["ğŸŒ TournamentController<br/>method: calendar()"]
    end

    %% VIEWS LAYER
    subgraph "ğŸ‘ï¸ Blade Views"
        AdminCalendarView["admin/calendar.blade.php<br/>ğŸ“… Dedicated Calendar"]
        TournamentCalendarView["admin/tournaments/calendar.blade.php<br/>ğŸ† Tournament Calendar"]
        RefereeCalendarView["referee/availability/calendar.blade.php<br/>âš¡ Referee Calendar"]
        PublicCalendarView["tournaments/calendar.blade.php<br/>ğŸŒ Public Calendar"]
    end

    %% REACT COMPONENTS
    subgraph "âš›ï¸ React Components"
        AdminCalendarJSX["AdminCalendar.jsx<br/>ğŸ¯ Management Focus"]
        PublicCalendarJSX["PublicCalendar.jsx<br/>ğŸŒ View-Only Focus"]
        RefereeCalendarJSX["RefereeCalendar.jsx<br/>ğŸ‘¨â€âš–ï¸ Personal Focus"]
    end

    %% DATA FLOW
    subgraph "ğŸ“Š Data Sources"
        TournamentData["ğŸ† Tournament Model<br/>with relationships"]
        AvailabilityData["âš¡ Availability Model<br/>user availabilities"]
        AssignmentData["ğŸ“ Assignment Model<br/>user assignments"]
    end

    %% NAVIGATION CONNECTIONS
    MenuCalendar --> Route1
    TournamentsList --> TournamentCalendarBtn
    TournamentCalendarBtn --> Route2
    RefereeMenu --> Route3
    PublicMenu --> Route4

    %% ROUTE TO CONTROLLER CONNECTIONS
    Route1 --> CalendarController
    Route2 --> TournamentController
    Route3 --> AvailabilityController
    Route4 --> PublicTournamentController

    %% CONTROLLER TO VIEW CONNECTIONS
    CalendarController --> AdminCalendarView
    TournamentController --> TournamentCalendarView
    AvailabilityController --> RefereeCalendarView
    PublicTournamentController --> PublicCalendarView

    %% VIEW TO REACT CONNECTIONS
    AdminCalendarView --> AdminCalendarJSX
    TournamentCalendarView --> AdminCalendarJSX
    RefereeCalendarView --> RefereeCalendarJSX
    PublicCalendarView --> PublicCalendarJSX

    %% DATA CONNECTIONS
    TournamentData --> CalendarController
    TournamentData --> TournamentController
    TournamentData --> AvailabilityController
    TournamentData --> PublicTournamentController

    AvailabilityData --> AvailabilityController
    AssignmentData --> AvailabilityController

    %% USER ACCESS
    Admin --> MenuCalendar
    Admin --> TournamentsList
    National --> MenuCalendar
    National --> TournamentsList
    Referee --> RefereeMenu
    Public --> PublicMenu

    %% PROBLEM AREAS (highlighted in red)
    classDef problem fill:#ffebee,stroke:#f44336,stroke-width:2px
    TournamentCalendarBtn:::problem
    Route2:::problem
    TournamentCalendarView:::problem

    %% WORKING AREAS (highlighted in green)
    classDef working fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    Route1:::working
    CalendarController:::working
    AdminCalendarView:::working

    %% LEGEND
    subgraph "ğŸš¨ Problema Identificato"
        ProblemDesc["âŒ DUPLICAZIONE CALENDAR ADMIN:<br/>â€¢ 2 route diverse per stesso utente<br/>â€¢ 2 controller diversi<br/>â€¢ 2 view diverse<br/>â€¢ Route legacy da tournaments.calendar"]
    end

    subgraph "âœ… Funzionante"
        WorkingDesc["âœ… CALENDAR CORRETTO:<br/>â€¢ admin.calendar.index<br/>â€¢ Admin\\CalendarController<br/>â€¢ admin/calendar.blade.php"]
    end
